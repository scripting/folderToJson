<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- OPML generated by OPML Editor v10.1b19 on Sun, 21 Feb 2021 21:48:19 GMT -->
<opml version="2.0">
	<head>
		<title>nodeEditor: folderToJson</title>
		<dateCreated>Sun, 21 Feb 2021 17:34:56 GMT</dateCreated>
		<dateModified>Sun, 21 Feb 2021 21:48:19 GMT</dateModified>
		<ownerName>Dave Winer</ownerName>
		<ownerId>http://davewiner.com/</ownerId>
		<expansionState>1, 2, 3, 10, 17, 31, 33, 35, 37, 38, 39, 41, 43, 45, 47, 48, 66, 71, 73, 83, 84, 86, 88, 90, 91, 99, 104</expansionState>
		<vertScrollState>1</vertScrollState>
		<windowTop>154</windowTop>
		<windowLeft>1051</windowLeft>
		<windowBottom>1015</windowBottom>
		<windowRight>2090</windowRight>
		</head>
	<body>
		<outline text="/scripting.com/code/foldertojson">
			<outline text="package.json">
				<outline text="{">
					<outline text="&quot;name&quot;: &quot;foldertojson&quot;,"/>
					<outline text="&quot;description&quot;: &quot;Generates a JavaScript object (or JSON text) that represents the structure of a folder.&quot;,"/>
					<outline text="&quot;version&quot;: &quot;0.4.5&quot;,"/>
					<outline text="&quot;main&quot;: &quot;foldertojson.js&quot;,"/>
					<outline text="&quot;license&quot;: &quot;MIT&quot;,"/>
					<outline text="&quot;repository&quot;: {">
						<outline text="&quot;type&quot; : &quot;git&quot;,"/>
						<outline text="&quot;url&quot; : &quot;https://github.com/scripting/folderToJson&quot;"/>
						<outline text="},"/>
						</outline>
					<outline text="&quot;files&quot;: [">
						<outline text="&quot;foldertojson.js&quot;,"/>
						<outline text="&quot;test/package.json&quot;," created="Sun, 21 Feb 2021 21:13:16 GMT"/>
						<outline text="&quot;test/test.js&quot;" created="Sun, 21 Feb 2021 21:13:19 GMT"/>
						<outline text="],"/>
						</outline>
					<outline text="&quot;dependencies&quot;: {">
						<outline text="&quot;daveutils&quot;: &quot;*&quot;,"/>
						<outline text="&quot;davefilesystem&quot;: &quot;*&quot;"/>
						<outline text="} "/>
						</outline>
					<outline text="}"/>
					</outline>
				</outline>
			<outline text="foldertojson.js">
				<outline text="var myVersion = &quot;0.4.5&quot;, myProductName = &quot;folderToJson&quot;;" created="Mon, 03 Feb 2014 03:21:03 GMT" pgfnum="36831"/>
				<outline text="" created="Sun, 21 Feb 2021 17:45:14 GMT"/>
				<outline text="exports.folderVisiter = folderVisiter; "/>
				<outline text="exports.getObject = getObject; "/>
				<outline text="exports.getJson = getJson; "/>
				<outline text=""/>
				<outline text="const fs = require (&quot;fs&quot;);" created="Sat, 20 Feb 2021 22:03:12 GMT"/>
				<outline text="const utils = require (&quot;daveutils&quot;);" created="Sat, 20 Feb 2021 22:03:12 GMT"/>
				<outline text="const filesystem = require (&quot;davefilesystem&quot;);" created="Sat, 20 Feb 2021 22:03:12 GMT"/>
				<outline text="" created="Sat, 20 Feb 2021 22:04:53 GMT"/>
				<outline text="const folderpath = &quot;node_modules/&quot;;" isComment="true" created="Sat, 20 Feb 2021 22:03:12 GMT"/>
				<outline text="const folderpath = &quot;node_modules/delayed-stream/&quot;;" isComment="true" created="Sat, 20 Feb 2021 22:03:12 GMT"/>
				<outline text="" isComment="true" created="Sat, 20 Feb 2021 22:34:06 GMT"/>
				<outline text="function folderVisiter (folderpath, fileCallback, inlevelCallback, outlevelCallback, includeFileCallback, completionCallback) {" created="Sat, 20 Feb 2021 22:34:06 GMT">
					<outline text="Changes" isComment="true" created="Sat, 20 Feb 2021 22:34:55 GMT">
						<outline text="2/20/21; 5:35:01 PM by DW" created="Sat, 20 Feb 2021 22:35:01 GMT">
							<outline text="A folder traversal suitable for generating a json or opml structure." created="Sat, 20 Feb 2021 22:35:01 GMT"/>
							<outline text="The completionCallback takes one param, a standard err struct." created="Sun, 21 Feb 2021 17:01:44 GMT"/>
							</outline>
						</outline>
					<outline text="function doFolder (folderpath, callback) {" created="Sat, 20 Feb 2021 22:35:32 GMT">
						<outline text="if (!utils.endsWith (folderpath, &quot;/&quot;)) {" created="Sun, 21 Feb 2021 16:45:14 GMT">
							<outline text="folderpath += &quot;/&quot;;" created="Sun, 21 Feb 2021 16:45:47 GMT"/>
							<outline text="}" created="Sun, 21 Feb 2021 16:45:42 GMT"/>
							</outline>
						<outline text="fs.readdir (folderpath, function (err, list) {">
							<outline text="if (err) {">
								<outline text="callback (err);"/>
								<outline text="}"/>
								</outline>
							<outline text="else {">
								<outline text="function doListItem (ix) {">
									<outline text="if (ix &lt; list.length) {">
										<outline text="var fname = list [ix];" created="Sun, 21 Feb 2021 16:40:22 GMT"/>
										<outline text="if (includeFileCallback (fname)) {" created="Sun, 21 Feb 2021 16:54:04 GMT">
											<outline text="var f = folderpath + fname;"/>
											<outline text="fs.stat (f, function (err, stats) {">
												<outline text="if (err) {">
													<outline text="doListItem (ix + 1);"/>
													<outline text="}"/>
													</outline>
												<outline text="else {">
													<outline text="if (stats.isDirectory ()) { //dive into the directory">
														<outline text="inlevelCallback (fname);" created="Sat, 20 Feb 2021 22:52:02 GMT"/>
														<outline text="doFolder (f, function (err) {">
															<outline text="if (err) {" created="Sun, 21 Feb 2021 17:03:19 GMT">
																<outline text="callback (err);" created="Sun, 21 Feb 2021 17:03:33 GMT"/>
																<outline text="}" created="Sun, 21 Feb 2021 17:03:22 GMT"/>
																</outline>
															<outline text="else {" created="Sun, 21 Feb 2021 17:03:23 GMT">
																<outline text="outlevelCallback ();" created="Sat, 20 Feb 2021 22:52:13 GMT"/>
																<outline text="doListItem (ix + 1);"/>
																<outline text="}" created="Sun, 21 Feb 2021 17:03:25 GMT"/>
																</outline>
															<outline text="});"/>
															</outline>
														<outline text="}"/>
														</outline>
													<outline text="else {">
														<outline text="if (fileCallback !== undefined) {">
															<outline text="fileCallback (f, stats);"/>
															<outline text="doListItem (ix + 1);"/>
															<outline text="}"/>
															</outline>
														<outline text="}"/>
														</outline>
													<outline text="}"/>
													</outline>
												<outline text="});"/>
												</outline>
											<outline text="}" created="Sun, 21 Feb 2021 16:54:13 GMT"/>
											</outline>
										<outline text="else {" created="Sun, 21 Feb 2021 16:56:06 GMT">
											<outline text="doListItem (ix + 1);"/>
											<outline text="}" created="Sun, 21 Feb 2021 16:56:08 GMT"/>
											</outline>
										<outline text="}"/>
										</outline>
									<outline text="else {">
										<outline text="callback (undefined);"/>
										<outline text="}"/>
										</outline>
									<outline text="}"/>
									</outline>
								<outline text="doListItem (0);"/>
								<outline text="}"/>
								</outline>
							<outline text="});"/>
							</outline>
						<outline text="}" created="Sat, 20 Feb 2021 22:36:18 GMT"/>
						</outline>
					<outline text="doFolder (folderpath, function (err) {" created="Sat, 20 Feb 2021 22:35:32 GMT">
						<outline text="completionCallback (err);" created="Sat, 20 Feb 2021 22:43:42 GMT"/>
						<outline text="});" created="Sat, 20 Feb 2021 22:43:35 GMT"/>
						</outline>
					<outline text="}" created="Sat, 20 Feb 2021 22:34:52 GMT"/>
					</outline>
				<outline text="function getObject (folderpath, callback) {" created="Sun, 21 Feb 2021 17:46:11 GMT">
					<outline text="var jstruct = new Object (), stack = new Array ();" created="Sat, 20 Feb 2021 22:14:47 GMT"/>
					<outline text="function completionCallback (err) {" created="Sat, 20 Feb 2021 22:07:45 GMT">
						<outline text="if (err) {" created="Sun, 21 Feb 2021 17:04:01 GMT">
							<outline text="callback (err);" created="Sun, 21 Feb 2021 17:46:49 GMT"/>
							<outline text="}" created="Sun, 21 Feb 2021 17:04:11 GMT"/>
							</outline>
						<outline text="else {" created="Sun, 21 Feb 2021 17:04:12 GMT">
							<outline text="callback (undefined, jstruct);" created="Sat, 20 Feb 2021 22:24:41 GMT"/>
							<outline text="}" created="Sun, 21 Feb 2021 17:04:14 GMT"/>
							</outline>
						<outline text="}" created="Sat, 20 Feb 2021 22:07:48 GMT"/>
						</outline>
					<outline text="function inlevelCallback (foldername) {" created="Sat, 20 Feb 2021 22:52:48 GMT">
						<outline text="jstruct [foldername] = new Object ();" created="Sat, 20 Feb 2021 22:54:16 GMT"/>
						<outline text="stack.push (jstruct);" created="Sat, 20 Feb 2021 22:54:07 GMT"/>
						<outline text="jstruct = jstruct [foldername];" created="Sat, 20 Feb 2021 22:55:14 GMT"/>
						<outline text="}" created="Sat, 20 Feb 2021 22:52:56 GMT"/>
						</outline>
					<outline text="function outlevelCallback () {" created="Sat, 20 Feb 2021 22:52:56 GMT">
						<outline text="jstruct = stack.pop ();" created="Sat, 20 Feb 2021 22:55:31 GMT"/>
						<outline text="}" created="Sat, 20 Feb 2021 22:53:04 GMT"/>
						</outline>
					<outline text="function fileCallback (f, stats) {" created="Sat, 20 Feb 2021 22:52:56 GMT">
						<outline text="var fname = utils.stringLastField (f, &quot;/&quot;);" created="Sun, 21 Feb 2021 16:51:07 GMT"/>
						<outline text="jstruct [fname] = {" created="Sat, 20 Feb 2021 22:54:16 GMT">
							<outline text="ctChars: stats.size," created="Sun, 21 Feb 2021 21:37:29 GMT"/>
							<outline text="whenModified: stats.mtime," created="Sun, 21 Feb 2021 21:39:01 GMT"/>
							<outline text="whenCreated: stats.birthtime" created="Sun, 21 Feb 2021 21:39:45 GMT"/>
							<outline text="};" created="Sun, 21 Feb 2021 21:37:24 GMT"/>
							</outline>
						<outline text="}" created="Sat, 20 Feb 2021 22:53:04 GMT"/>
						</outline>
					<outline text="function includeFileCallback (fname) {" created="Sun, 21 Feb 2021 16:52:25 GMT">
						<outline text="if (utils.beginsWith (fname, &quot;.&quot;)) {" created="Sun, 21 Feb 2021 16:52:40 GMT">
							<outline text="return (false);" created="Sun, 21 Feb 2021 16:52:49 GMT"/>
							<outline text="}" created="Sun, 21 Feb 2021 16:52:53 GMT"/>
							</outline>
						<outline text="return (true);" created="Sun, 21 Feb 2021 16:52:54 GMT"/>
						<outline text="}" created="Sun, 21 Feb 2021 16:52:35 GMT"/>
						</outline>
					<outline text="folderVisiter (folderpath, fileCallback, inlevelCallback, outlevelCallback, includeFileCallback, completionCallback);"/>
					<outline text="}" created="Sun, 21 Feb 2021 17:46:20 GMT"/>
					</outline>
				<outline text="function getJson (folderpath, callback) {" created="Sun, 21 Feb 2021 17:46:11 GMT">
					<outline text="getObject (folderpath, function (err, jstruct) {" created="Sun, 21 Feb 2021 17:47:28 GMT">
						<outline text="if (err) {" created="Sun, 21 Feb 2021 17:47:46 GMT">
							<outline text="callback (err);" created="Sun, 21 Feb 2021 17:47:49 GMT"/>
							<outline text="}" created="Sun, 21 Feb 2021 17:47:52 GMT"/>
							</outline>
						<outline text="else {" created="Sun, 21 Feb 2021 17:47:53 GMT">
							<outline text="callback (undefined, utils.jsonStringify (jstruct));" created="Sun, 21 Feb 2021 17:47:55 GMT"/>
							<outline text="}" created="Sun, 21 Feb 2021 17:48:06 GMT"/>
							</outline>
						<outline text="});" created="Sun, 21 Feb 2021 17:47:37 GMT"/>
						</outline>
					<outline text="}" created="Sun, 21 Feb 2021 17:46:20 GMT"/>
					</outline>
				</outline>
			<outline text="readme.md" created="Sun, 21 Feb 2021 17:40:03 GMT">
				<outline text="# folderToJson" created="Sun, 21 Feb 2021 17:40:05 GMT">
					<outline text="Generates a JavaScript object (or JSON text) that represents the structure of a folder." created="Sun, 21 Feb 2021 17:43:29 GMT"/>
					</outline>
				<outline text="### Basic functionality" created="Sun, 21 Feb 2021 21:05:05 GMT">
					<outline text="The &lt;a href=&quot;https://github.com/scripting/folderToJson/tree/main/test&quot;&gt;test app&lt;/a&gt; displays in the console the folder hierarchy of the node_modules folder. " created="Sun, 21 Feb 2021 21:05:12 GMT"/>
					</outline>
				<outline text="### Advanced functionaly" created="Sun, 21 Feb 2021 21:06:28 GMT">
					<outline text="You can cook your own generator for other formats by following the example of &lt;a href=&quot;https://github.com/scripting/folderToJson/blob/93dc1daf715777a8c003ac1ee608baf074ca227a/foldertojson.js#L68&quot;&gt;getObject&lt;/a&gt; in foldertojson.js." created="Sun, 21 Feb 2021 21:06:35 GMT"/>
					</outline>
				</outline>
			<outline text="test/package.json" created="Sun, 21 Feb 2021 18:12:23 GMT">
				<outline text="{">
					<outline text="&quot;name&quot;: &quot;testfoldertojson&quot;,"/>
					<outline text="&quot;description&quot;: &quot;Test it with local node_modules folder.&quot;,"/>
					<outline text="&quot;version&quot;: &quot;0.4.1&quot;,"/>
					<outline text="&quot;main&quot;: &quot;test.js&quot;,"/>
					<outline text="&quot;license&quot;: &quot;MIT&quot;,"/>
					<outline text="&quot;dependencies&quot;: {">
						<outline text="&quot;daveutils&quot;: &quot;*&quot;,"/>
						<outline text="&quot;foldertojson&quot;: &quot;*&quot;"/>
						<outline text="} "/>
						</outline>
					<outline text="}"/>
					</outline>
				</outline>
			<outline text="test/test.js" created="Sun, 21 Feb 2021 18:12:35 GMT">
				<outline text="const utils = require (&quot;daveutils&quot;);" created="Sun, 21 Feb 2021 18:12:39 GMT"/>
				<outline text="const folderToJson = require (&quot;foldertojson&quot;);" created="Sun, 21 Feb 2021 18:12:39 GMT"/>
				<outline text="" created="Sun, 21 Feb 2021 18:14:00 GMT"/>
				<outline text="folderToJson.getJson (&quot;node_modules&quot;, function (err, jsontext) {" created="Sun, 21 Feb 2021 18:14:01 GMT">
					<outline text="if (err) {" created="Sun, 21 Feb 2021 18:14:50 GMT">
						<outline text="console.log (err.message);" created="Sun, 21 Feb 2021 18:14:53 GMT"/>
						<outline text="}" created="Sun, 21 Feb 2021 18:15:03 GMT"/>
						</outline>
					<outline text="else {" created="Sun, 21 Feb 2021 18:15:04 GMT">
						<outline text="console.log (jsontext);" created="Sun, 21 Feb 2021 18:15:06 GMT"/>
						<outline text="}" created="Sun, 21 Feb 2021 18:15:11 GMT"/>
						</outline>
					<outline text="});" created="Sun, 21 Feb 2021 18:14:46 GMT"/>
					</outline>
				</outline>
			</outline>
		<outline text="build script" created="Sun, 21 Feb 2021 17:35:53 GMT">
			<outline text="nodeEditorSuite.utilities.buildFolderToJson ()" created="Sun, 21 Feb 2021 17:35:58 GMT"/>
			</outline>
		</body>
	</opml>
